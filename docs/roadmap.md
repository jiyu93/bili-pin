# Bili Pin Roadmap

## v1.0.2 
- **稳定性 / 性能（长时间挂着不崩）**：
  - 收窄 API 拦截范围：仅对 `portal/uplist/feed/relation` 等我们真正依赖的接口解析 JSON，避免对所有 `api.bilibili.com` 响应做解析导致长期性能/内存压力累积。
  - 增加缓存上限与裁剪策略：限制 UP 信息缓存与 portal 列表长度，避免长时间运行下缓存无边界增长。
  - 增强关注时间兼容性：将 `mid -> mtime` 关注时间独立缓存，避免在关注列表很大时因 UP 信息缓存裁剪导致“关注时间不显示”。
  - 单例保护：防止极端情况下重复初始化 API 拦截器导致多重 wrap。

## v1.0.1 
- **Bug Fixes**:
  - 修复了动态页推荐栏“加载更多”后，新加载的 UP 主置顶按钮无法点击（置灰）的问题（通过拦截 `v1/uplist` 接口解决）。
  - 修复了 SPA 环境下多次注入导致的 `MutationObserver` 和全局事件监听器内存泄漏问题。

## v1.0.0 
- **动态页置顶栏**：在 `https://t.bilibili.com/` 注入“置顶动态”栏，支持展开/收起、显示总数。
- **全站置顶入口**：
  - 动态页推荐横条：注入图钉按钮。
  - 动态卡片菜单：注入置顶选项。
  - 个人空间页/视频播放页：在“已关注”菜单中注入置顶选项。
- **核心交互**：
  - 点击置顶头像切换 Feed（自动处理 UP 是否在推荐栏的情况）。
  - 置顶栏支持拖拽排序（即时保存）。
  - 选中高亮与筛选态 UI（隐藏 Tabs）。
- **辅助功能**：
  - 个人空间关注列表显示“关注时间”。
  - 数据本地持久化 (`chrome.storage.local`)。
